# Azure OpenAI Local Middleware - Server Configuration
# Copy this file to config.yaml and update with your values
#
# This file contains server/shared settings.
# Local settings (host, port, api_key) go in local.yaml
#
# For single-file mode (legacy), run with: --single-file

azure:
  # Azure OpenAI resource endpoint
  endpoint: "https://your-resource.openai.azure.com"
  
  # Default deployment name
  deployment: "gpt-4"
  
  # API version to use
  api_version: "2024-02-01"
  
  # Authentication mode: "aad" for Azure AD, "api_key" for API key
  auth_mode: "aad"
  
  # API key (only used if auth_mode is "api_key")
  api_key: ""
  
  # Azure AD (AAD) Service Principal credentials (optional)
  # If provided, all three fields must be set
  # If not provided, falls back to DefaultAzureCredential chain:
  #   1. Environment variables (AZURE_TENANT_ID, AZURE_CLIENT_ID, AZURE_CLIENT_SECRET)
  #   2. Managed Identity
  #   3. Azure CLI
  #   4. Azure PowerShell
  #   5. Interactive browser (if available)
  tenant_id: ""
  client_id: ""
  client_secret: ""

# Pricing in EUR per 1000 tokens
# Add entries for each deployment you use
pricing:
  gpt-4:
    input: 0.03
    output: 0.06
  gpt-4-turbo:
    input: 0.01
    output: 0.03
  gpt-35-turbo:
    input: 0.0015
    output: 0.002
  # Standard chat models
  gpt-4.1-nano:
    input: 0.0001
    output: 0.0004
  # Thinking/reasoning models
  gpt-5-nano:
    input: 0.01
    output: 0.03
  text-embedding-ada-002:
    input: 0.0001
    output: 0.0
  text-embedding-3-small:
    input: 0.00002
    output: 0.0
  text-embedding-3-large:
    input: 0.00013
    output: 0.0

limits:
  # Daily cost cap in EUR
  # Requests will be blocked with HTTP 429 when exceeded
  daily_cost_cap_eur: 5.0

logging:
  # Base64-encoded AES-256 key (32 bytes)
  # Generate with: python -c "import secrets, base64; print(base64.b64encode(secrets.token_bytes(32)).decode())"
  encryption_key: "GENERATE_A_KEY_AND_PASTE_HERE"
  
  # Compression algorithm: "gzip" or "none"
  compression: "gzip"
  
  # Log directory (relative to working directory or absolute)
  directory: "logs"
